#N canvas 409 44 1407 973 10;
#X obj 52 122 soundfiler;
#X obj 128 123 array define monosynth;
#X obj 99 366 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 99 386 t b b;
#X obj 53 455 realtime;
#X floatatom 53 476 5 0 0 0 - - -;
#X msg 157 387 warnings 1;
#X floatatom 532 358 5 0 0 0 - - -;
#X msg 531 378 set resynth-\$1 \, bang;
#X obj 531 399 tabplay~;
#X obj 531 420 dac~;
#X obj 98 409 fluid.bufnmf~ -components 5 -source monosynth -resynth
resynth -bases bases -activations activations -fftsettings 512 256
1024;
#N canvas 0 23 450 278 (subpatch) 0;
#X array viz-b 513 float 2;
#X coords 0 1 513 0 513 140 1 0 0;
#X restore 770 248 graph;
#X obj 869 178 array size;
#X msg 889 150 symbol bases-\$1;
#X floatatom 846 104 5 0 0 0 - - -;
#X obj 769 178 array get;
#X obj 846 122 t b b f;
#X obj 770 199 array set viz-b;
#X obj 869 199 array size viz-b;
#N canvas 0 23 450 278 (subpatch) 0;
#X array viz-a 2013 float 2;
#X coords 0 1 2013 0 503 140 1 0 0;
#X restore 773 581 graph;
#X obj 872 511 array size;
#X floatatom 849 437 5 0 0 0 - - -;
#X obj 772 511 array get;
#X obj 849 455 t b b f;
#X obj 773 532 array set viz-a;
#X obj 872 532 array size viz-a;
#X msg 892 483 symbol activations-\$1;
#X obj 270 123 clone multiarray 5 resynth;
#X obj 270 142 clone multiarray 5 bases;
#X obj 270 161 clone multiarray 5 activations;
#N canvas 99 218 799 596 fluid.bufnmf.noiseplay.fft 0;
#X obj 78 96 inlet~;
#X obj 74 137 *~;
#X obj 74 158 rfft~;
#X obj 74 200 rifft~;
#X obj 55 284 *~;
#X obj 56 342 outlet~;
#X obj 35 73 tabreceive~ fluid.bufnmf.hann;
#X obj 239 133 tabreceive~ bases-0;
#X obj 105 179 *~;
#X obj 74 179 *~;
#X obj 239 108 inlet;
#X obj 442 147 bang~;
#X obj 43 39 block~ 1024 4;
#X obj 442 201 t f f;
#X obj 443 166 expr if($f3 < $f2 \, $f3 + 1 \, 0);
#X obj 531 147 - 1;
#X obj 531 36 inlet;
#X obj 566 117 array size activations-0;
#X obj 442 222 tabread activations-0;
#X obj 55 305 *~;
#X obj 531 57 t a b a;
#X obj 580 84 list split 1;
#X connect 0 0 1 1;
#X connect 1 0 2 0;
#X connect 2 0 9 0;
#X connect 2 1 8 0;
#X connect 3 0 4 1;
#X connect 4 0 19 0;
#X connect 6 0 1 0;
#X connect 6 0 4 0;
#X connect 7 0 8 1;
#X connect 7 0 9 1;
#X connect 8 0 3 1;
#X connect 9 0 3 0;
#X connect 10 0 7 0;
#X connect 11 0 14 0;
#X connect 13 0 18 0;
#X connect 13 1 14 2;
#X connect 14 0 13 0;
#X connect 15 0 14 1;
#X connect 16 0 20 0;
#X connect 17 0 15 0;
#X connect 18 0 19 1;
#X connect 19 0 5 0;
#X connect 20 0 18 0;
#X connect 20 1 17 0;
#X connect 20 2 21 0;
#X connect 21 1 17 1;
#X restore 89 785 pd fluid.bufnmf.noiseplay.fft;
#N canvas 556 77 450 468 make.hann.window 0;
#X obj 107 94 t f b;
#X msg 107 71 1024;
#X obj 107 136 until;
#X msg 107 157 1;
#X obj 107 178 +;
#X msg 148 156 -1;
#X obj 107 348 array define fluid.bufnmf.hann 1024;
#X obj 107 197 t f f f;
#X obj 106 324 tabwrite fluid.bufnmf.hann;
#X obj 107 218 / 1024;
#X obj 107 260 sin;
#X obj 107 281 *;
#X obj 107 26 r pd-dsp-started;
#X obj 234 134 expr 4*atan(1);
#X obj 107 239 * 3.1;
#X obj 107 47 t b b;
#X obj 107 302 * 0.0255155;
#X connect 0 0 2 0;
#X connect 0 1 5 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 7 0 9 0;
#X connect 7 1 4 1;
#X connect 7 2 8 1;
#X connect 9 0 14 0;
#X connect 10 0 11 0;
#X connect 10 0 11 1;
#X connect 11 0 16 0;
#X connect 12 0 15 0;
#X connect 13 0 14 1;
#X connect 14 0 10 0;
#X connect 15 0 1 0;
#X connect 15 1 13 0;
#X connect 16 0 8 0;
#X restore 88 807 pd make.hann.window;
#X obj 87 705 noise~;
#X floatatom 244 704 5 0 0 0 - - -;
#X msg 244 724 set bases-\$1;
#X floatatom 348 721 5 0 0 0 - - -;
#X msg 348 741 set activations-\$1;
#X obj 87 726 *~ 4;
#N canvas 250 97 1269 825 didactic 0;
#X obj 36 69 array define lowsine 44100;
#X obj 36 89 array define hisine 44100;
#X msg 38 172 44100;
#X obj 38 217 until;
#X obj 38 193 t f b;
#X msg 106 238 -1;
#X msg 38 238 1;
#X obj 38 259 +;
#X obj 38 326 tabwrite lowsine;
#X obj 278 328 tabwrite hisine;
#X obj 38 280 t f f f f f, f 40;
#X obj 38 305 expr sin($f1 / 22050 * 3.14159 * 50);
#X obj 278 307 expr sin($f1 / 22050 * 3.14159 * 5000);
#X obj 695 725 tabplay~;
#X obj 695 746 dac~;
#X msg 696 692 set lowsine \, bang;
#X msg 605 676 set hisine \, bang;
#X obj 37 153 r pd-dsp-started;
#N canvas 0 22 450 278 (subpatch) 0;
#X array didact-source2 88200 float 2;
#X coords 0 1 88200 -1 500 140 1 0 0;
#X restore 39 599 graph;
#X obj 41 501 fluid.bufcompose~;
#X msg 41 464 reset \, destgain 1 \, destination didact-source2 \,
source lowsine \, bang \, source hisine \, deststartframe 44100 \,
bang;
#X msg 41 439 \; didact-source2 const;
#N canvas 0 22 450 278 (subpatch) 0;
#X array didact-basis-0 513 float 2;
#X coords 0 1 513 0 513 70 1 0 0;
#X restore 617 105 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array didact-basis-1 513 float 2;
#X coords 0 1 513 0 513 70 1 0 0;
#X restore 617 193 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array didact-basis-2 513 float 2;
#X coords 0 1 513 0 513 70 1 0 0;
#X restore 616 280 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array didact-activation-0 173 float 2;
#X coords 0 1 173 0 173 70 1 0 0;
#X restore 1141 105 graph;
#N canvas 0 23 450 278 (subpatch) 0;
#X array didact-activation-1 173 float 2;
#X coords 0 1 173 0 173 70 1 0 0;
#X restore 1141 193 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array didact-activation-2 173 float 2;
#X coords 0 1 173 0 173 70 1 0 0;
#X restore 1140 280 graph;
#X msg 555 407 \; didact-basis-2 const 0.1;
#X obj 723 450 until;
#X obj 723 426 t f b;
#X msg 791 471 -1;
#X msg 723 471 1;
#X obj 723 492 +;
#X obj 723 513 t f f f f f, f 40;
#X msg 723 405 513;
#X obj 723 538 < 50;
#X obj 871 538 >= 50;
#X obj 723 559 tabwrite didact-basis-0;
#X obj 870 559 tabwrite didact-basis-1;
#X msg 844 628 basesmode 2 \, bang;
#X obj 861 664 fluid.bufnmf~ -source didact-source2 -activations didact-activation
-bases didact-basis -components 3;
#X msg 981 630 basesmode 1 \, bang;
#X obj 556 375 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 41 521 \; didact-source2 xticks 0 0 0;
#X msg 861 693 \; didact-activation-0 xticks 0 0 0 \; didact-activation-1
xticks 0 0 0 \; didact-activation-2 xticks 0 0 0 \; didact-basis-0
xticks 0 0 0 \; didact-basis-1 xticks 0 0 0 \; didact-basis-2 xticks
0 0 0;
#X connect 2 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 4 1 5 0;
#X connect 5 0 7 1;
#X connect 6 0 7 0;
#X connect 7 0 10 0;
#X connect 10 0 11 0;
#X connect 10 1 8 1;
#X connect 10 2 12 0;
#X connect 10 3 9 1;
#X connect 10 4 7 1;
#X connect 11 0 8 0;
#X connect 12 0 9 0;
#X connect 13 0 14 0;
#X connect 13 0 14 1;
#X connect 15 0 13 0;
#X connect 16 0 13 0;
#X connect 17 0 2 0;
#X connect 19 0 44 0;
#X connect 20 0 19 0;
#X connect 29 0 32 0;
#X connect 30 0 29 0;
#X connect 30 1 31 0;
#X connect 31 0 33 1;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 36 0;
#X connect 34 1 38 1;
#X connect 34 2 37 0;
#X connect 34 3 39 1;
#X connect 34 4 33 1;
#X connect 35 0 30 0;
#X connect 36 0 38 0;
#X connect 37 0 39 0;
#X connect 40 0 41 0;
#X connect 41 0 45 0;
#X connect 42 0 41 0;
#X connect 43 0 28 0;
#X connect 43 0 35 0;
#X restore 741 804 pd didactic updating bases;
#N canvas 115 158 1212 874 fixed 0;
#X obj 28 813 array define guitar;
#X obj 231 815 clone multiarray 10 guit-bases;
#X obj 230 834 clone multiarray 2 summed-bases;
#X obj 433 816 clone multiarray 70 guit-stats;
#X obj 433 835 clone multiarray 70 guit-features;
#X obj 26 64 soundfiler;
#X obj 26 85 t b;
#X obj 26 106 fluid.bufnmf~ -source guitar -numframes 88200 -components
10 -bases guit-bases -resynth guit-resynth -fftsettings 1024 256 2048
;
#X obj 26 832 clone multiarray 10 guit-resynth;
#X obj 26 170 fluid.bufspectralshape~ -source guit-resynth -features
guit-features -fftsettings 1024 256 2048;
#X obj 27 212 fluid.bufstats~ -source guit-features -stats guit-stats
;
#N canvas 0 23 909 774 statsquery 0;
#X obj 118 150 list split 1;
#X obj 212 156 list length;
#X obj 153 170 t a;
#X obj 117 256 +;
#X msg 117 223 -1;
#X obj 215 300 tabread;
#X obj 117 202 t b b f;
#X msg 245 277 set guit-stats-\$1;
#X msg 215 278 5;
#X obj 156 375 spigot;
#X obj 119 429 f;
#X obj 117 277 t f f f, f 14;
#X obj 117 298 sel 0;
#X obj 118 100 t a a b, f 38;
#X msg 375 320 -1;
#X obj 243 351 >;
#X obj 230 409 spigot;
#X obj 215 321 t f f;
#X obj 118 54 inlet;
#X text 163 61 the channels where the centroids are= the first of every
7 (see fluid.bufstats~ help), f 85;
#X msg 118 79 0 7 14 21 28 35 42 49 56 63;
#X text 52 147 iterates backwards;
#X text 18 241 keeps the index;
#X text 269 301 reads the index of the median stats;
#X text 278 407 compares it- passes if larger \, and also stores the
index;
#X obj 119 450 outlet;
#X text 119 473 output the index of the largest;
#X connect 0 0 6 0;
#X connect 0 1 2 0;
#X connect 1 0 3 1;
#X connect 2 0 0 0;
#X connect 3 0 11 0;
#X connect 4 0 3 0;
#X connect 5 0 17 0;
#X connect 6 0 4 0;
#X connect 6 1 8 0;
#X connect 6 2 7 0;
#X connect 7 0 5 0;
#X connect 8 0 5 0;
#X connect 9 0 10 1;
#X connect 10 0 25 0;
#X connect 11 0 12 0;
#X connect 11 1 9 0;
#X connect 11 2 3 1;
#X connect 12 0 10 0;
#X connect 13 0 0 0;
#X connect 13 1 1 0;
#X connect 13 2 14 0;
#X connect 14 0 10 1;
#X connect 14 0 15 1;
#X connect 15 0 9 1;
#X connect 15 0 16 1;
#X connect 16 0 15 1;
#X connect 17 0 16 0;
#X connect 17 1 15 0;
#X connect 18 0 20 0;
#X connect 20 0 13 0;
#X restore 27 270 pd statsquery;
#N canvas 329 66 450 472 makenewbases 0;
#X obj 16 26 inlet;
#X obj 17 282 outlet;
#X obj 195 218 sel;
#X obj 16 47 t b f;
#X obj 162 257 f;
#X msg 16 68 10;
#X obj 16 89 t f b;
#X obj 16 156 +;
#X msg 79 130 -1;
#X obj 16 110 until;
#X msg 16 131 1;
#X floatatom 88 24 5 0 0 0 - - -;
#X obj 16 177 t f f f;
#X obj 16 198 sel 9;
#X obj 82 358 fluid.bufcompose~ -destination summed-bases -destgain
1 -source guit-bases -numchans 1;
#X msg 112 298 deststartchan 0 \, startchan \$1 \, bang;
#X msg 130 323 deststartchan 1 \, startchan \$1 \, bang;
#X connect 0 0 3 0;
#X connect 2 0 4 0;
#X connect 2 1 16 0;
#X connect 3 0 5 0;
#X connect 3 1 2 1;
#X connect 3 1 4 1;
#X connect 4 0 15 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 6 1 8 0;
#X connect 7 0 12 0;
#X connect 8 0 7 1;
#X connect 9 0 10 0;
#X connect 10 0 7 0;
#X connect 11 0 3 0;
#X connect 12 0 13 0;
#X connect 12 1 2 0;
#X connect 12 2 7 1;
#X connect 13 0 1 0;
#X connect 15 0 14 0;
#X connect 16 0 14 0;
#X restore 26 308 pd makenewbases;
#X obj 26 329 fluid.bufnmf~ -source guitar -fftsettings 1024 256 2048
-iterations 100 -bases summed-bases -basesmode 2 -components 2 -resynth
guit-resynth;
#X obj 28 379 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 533 359 5 0 0 0 - - -;
#X obj 531 399 tabplay~;
#X obj 531 420 dac~;
#X msg 531 378 set guit-resynth-\$1 \, bang;
#X msg 26 21 read -resize ../media/Tremblay-AaS-AcousticStrums-M.wav
guitar;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 15 0 18 0;
#X connect 16 0 17 0;
#X connect 16 0 17 1;
#X connect 18 0 16 0;
#X connect 19 0 5 0;
#X restore 742 859 pd fixed bases;
#X msg 52 86 read -resize ../media/Tremblay-AaS-SynthTwoVoices-M.wav
monosynth, f 65;
#X connect 2 0 3 0;
#X connect 3 0 11 0;
#X connect 3 1 4 0;
#X connect 4 0 5 0;
#X connect 6 0 11 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 0 10 1;
#X connect 11 0 4 1;
#X connect 13 0 19 0;
#X connect 14 0 13 1;
#X connect 14 0 16 2;
#X connect 15 0 17 0;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 17 1 13 0;
#X connect 17 2 14 0;
#X connect 21 0 26 0;
#X connect 22 0 24 0;
#X connect 23 0 25 0;
#X connect 24 0 23 0;
#X connect 24 1 21 0;
#X connect 24 2 27 0;
#X connect 27 0 21 1;
#X connect 27 0 23 2;
#X connect 31 0 10 0;
#X connect 33 0 38 0;
#X connect 34 0 35 0;
#X connect 35 0 31 1;
#X connect 36 0 37 0;
#X connect 37 0 31 2;
#X connect 38 0 31 0;
#X connect 41 0 0 0;
