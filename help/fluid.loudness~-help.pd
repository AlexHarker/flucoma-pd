#N canvas 14 42 490 432 10;
#X obj 12 19 cnv 15 100 10 empty empty fluid.loudness~ 20 12 0 36 -262144
-66577 0;
#X text 36 57 A Loudness and True-Peak Descriptor in Real-Time, f
63;
#X text 34 101 Two loudness descriptors \, with a ITU BS 1770 mode
;
#N canvas 505 43 559 571 EBU_r128 0;
#X obj 47 351 dac~;
#X obj 45 210 *~;
#X obj 59 192 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 137 205 *~;
#X obj 151 187 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 193 205 *~;
#X obj 207 187 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 267 205 *~;
#X obj 281 187 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 137 168 osc~ 220;
#X obj 137 237 *~ 0.1;
#X obj 341 205 *~;
#X obj 356 187 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 241 136 5 0 0 0 - - -;
#N canvas 765 239 363 247 drums_players 0;
#X obj 94 59 r pd-dsp-started;
#X obj 27 17 loadbang;
#X obj 27 59 soundfiler;
#X obj 28 180 *~, f 10;
#X obj 28 140 /~;
#X msg 28 121 1;
#X obj 28 161 phasor~;
#X obj 125 100 samplerate~;
#X obj 98 121 / 1;
#X obj 27 77 t b f b;
#X obj 95 77 t b b b;
#X obj 28 221 outlet~;
#X msg 27 37 read -resize ../media/Nicol-LoopE-M.wav loudness_drums
;
#X obj 124 154 array define loudness_drums;
#X obj 28 200 tabread4~ loudness_drums;
#X connect 0 0 10 0;
#X connect 1 0 12 0;
#X connect 2 0 9 0;
#X connect 3 0 14 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 3 0;
#X connect 7 0 8 1;
#X connect 8 0 4 1;
#X connect 9 0 5 0;
#X connect 9 1 3 1;
#X connect 9 1 8 0;
#X connect 9 2 7 0;
#X connect 10 0 5 0;
#X connect 10 1 8 0;
#X connect 10 2 7 0;
#X connect 12 0 2 0;
#X connect 14 0 11 0;
#X restore 32 168 pd drums_players;
#N canvas 0 23 450 300 triangle 0;
#X obj 37 47 inlet;
#X obj 37 67 phasor~ 220;
#X obj 37 85 -~ 0.5;
#X obj 37 103 abs~;
#X obj 37 121 *~ 4;
#X obj 37 139 -~ 1;
#X obj 37 160 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X restore 193 168 pd triangle;
#N canvas 0 23 450 300 sawtooth 0;
#X obj 37 37 inlet;
#X obj 37 79 phasor~ 220;
#X obj 37 115 -~ 1;
#X obj 37 97 *~ 2;
#X obj 37 136 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X restore 267 168 pd sawtooth;
#N canvas 0 23 450 300 square 0;
#X obj 37 37 inlet;
#X obj 37 64 phasor~ 220;
#X obj 37 119 -~;
#X obj 51 83 -~ 0.5;
#X obj 51 101 wrap~;
#X obj 37 137 *~ 2;
#X obj 37 158 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 5 0 6 0;
#X restore 341 168 pd square;
#X obj 404 168 noise~;
#X obj 449 169 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 404 205 *~;
#X obj 449 187 * 0.2;
#X obj 137 295 fluid.loudness~ 19200 -windowsize 17640 -hopsize 4410
-kweighting 1 -truepeak 1;
#N canvas 966 141 337 224 windowSize 0;
#X obj 40 33 r pd-dsp-started;
#X obj 40 51 samplerate~;
#X obj 40 72 / 10;
#X obj 114 111 * 4;
#X msg 114 132 windowsize \$1;
#X msg 40 110 hopsize \$1;
#X obj 39 168 outlet;
#X text 156 36 ITU BS 1770 stipulates a 400ms window with 100ms update
for momentary loudness, f 25;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 6 0;
#X restore 193 267 pd windowSize;
#X text 282 264 The maximum size argument is set to 400ms at 48k,
f 25;
#X text 30 20 EBU / ITU Loudness metering;
#X text 240 71 change the various frequencies to see the impact of
the filter for the loudness. The true peak is steady., f 37;
#X obj 137 327 unpack f f;
#X floatatom 137 348 5 0 0 0 - - -;
#X floatatom 194 348 5 0 0 0 - - -;
#X text 141 363 loudness;
#X text 200 363 peak;
#X obj 137 433 t f f;
#X floatatom 137 451 5 0 0 0 - - -;
#X obj 194 433 t f f;
#X floatatom 194 451 5 0 0 0 - - -;
#X msg 251 397 -313;
#X text 283 397 reset;
#X msg 241 115 55;
#X msg 273 114 110;
#X msg 304 115 220;
#X msg 336 116 440;
#X obj 137 415 max -157;
#X obj 194 415 max -313;
#X text 134 467 highest loudness and peak since last reset;
#X connect 1 0 0 0;
#X connect 1 0 0 1;
#X connect 1 0 22 0;
#X connect 2 0 1 1;
#X connect 3 0 10 0;
#X connect 4 0 3 1;
#X connect 5 0 10 0;
#X connect 6 0 5 1;
#X connect 7 0 10 0;
#X connect 8 0 7 1;
#X connect 9 0 3 0;
#X connect 10 0 0 0;
#X connect 10 0 0 1;
#X connect 10 0 22 0;
#X connect 11 0 10 0;
#X connect 12 0 11 1;
#X connect 13 0 9 0;
#X connect 13 0 15 0;
#X connect 13 0 16 0;
#X connect 13 0 17 0;
#X connect 14 0 1 0;
#X connect 15 0 5 0;
#X connect 16 0 7 0;
#X connect 17 0 11 0;
#X connect 18 0 20 0;
#X connect 19 0 21 0;
#X connect 20 0 10 0;
#X connect 21 0 20 1;
#X connect 22 0 27 0;
#X connect 23 0 22 0;
#X connect 27 0 28 0;
#X connect 27 1 29 0;
#X connect 28 0 42 0;
#X connect 29 0 43 0;
#X connect 32 0 33 0;
#X connect 32 1 42 1;
#X connect 34 0 35 0;
#X connect 34 1 43 1;
#X connect 36 0 42 1;
#X connect 36 0 43 1;
#X connect 38 0 13 0;
#X connect 39 0 13 0;
#X connect 40 0 13 0;
#X connect 41 0 13 0;
#X connect 42 0 32 0;
#X connect 43 0 34 0;
#X restore 380 202 pd EBU_r128;
#X obj 52 179 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 38 198 *~;
#N canvas 0 23 424 251 pink 0;
#X text 26 171 signal-out;
#X obj 28 150 outlet~;
#X obj 29 49 noise~;
#X obj 29 88 biquad~ 1.83221 -0.836851 0.271264 -0.456311 0.18969;
#X obj 29 108 biquad~ 0.273097 0.087865 0.505803 0.171365 -0.03813
;
#X obj 29 68 biquad~ 1.98893 -0.988954 1.00554 -1.9889 0.983444;
#X text 166 195 IEM KUG;
#X text 150 183 musil;
#X text 180 183 @;
#X text 186 183 iem.at;
#X text 149 205 Graz \, Austria;
#X text 101 172 (c) Thomas Musil 2000 - 2018;
#X text 109 49 3 shelving filters 2nd order;
#X text 8 5 cheap pink-noise-generator approximation - code taken from
pink~ with -3 dB per octave spectral slope, f 65;
#X obj 29 129 *~ 0.4;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 14 0;
#X connect 5 0 3 0;
#X connect 14 0 1 0;
#X restore 38 156 pd pink;
#X obj 38 243 dac~;
#X obj 143 223 fluid.loudness~;
#X obj 143 244 unpack f f;
#X obj 85 223 env~;
#X floatatom 85 265 5 0 0 0 - - -;
#X floatatom 143 265 5 0 0 0 - - -;
#X obj 85 244 - 100;
#X floatatom 200 265 5 0 0 0 - - -;
#X text 147 280 loudness;
#X text 206 280 peak;
#X msg 143 195 kweighting \$1;
#X msg 232 195 truepeak \$1;
#X obj 143 178 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 232 178 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 142 157 loadbang;
#X obj 143 350 t f f;
#X floatatom 143 368 5 0 0 0 - - -;
#X obj 200 350 t f f;
#X floatatom 200 368 5 0 0 0 - - -;
#X msg 257 314 -313;
#X obj 85 350 t f f;
#X floatatom 85 368 5 0 0 0 - - -;
#X text 90 280 rms;
#X text 289 314 reset;
#X obj 200 332 max -313;
#X obj 143 332 max -157;
#X obj 85 332 max -100;
#N canvas 0 23 450 300 (subpatch) 0;
#X obj 83 51 inlet;
#X obj 83 89 pdcontrol;
#X msg 83 71 dir 0 ../docs/fluid.loudness~.html;
#X msg 143 89 browse \$1;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X restore 428 164 pd;
#X text 297 145 launch the HTML doc->;
#X obj 429 147 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 82 383 highest loudness and peak since last reset;
#X connect 4 0 5 1;
#X connect 5 0 7 0;
#X connect 5 0 7 1;
#X connect 5 0 8 0;
#X connect 5 0 10 0;
#X connect 6 0 5 0;
#X connect 8 0 9 0;
#X connect 9 0 12 0;
#X connect 9 1 14 0;
#X connect 10 0 13 0;
#X connect 11 0 33 0;
#X connect 12 0 32 0;
#X connect 13 0 11 0;
#X connect 14 0 31 0;
#X connect 17 0 8 0;
#X connect 18 0 8 0;
#X connect 19 0 17 0;
#X connect 20 0 18 0;
#X connect 21 0 19 0;
#X connect 21 0 20 0;
#X connect 22 0 23 0;
#X connect 22 1 32 1;
#X connect 24 0 25 0;
#X connect 24 1 31 1;
#X connect 26 0 31 1;
#X connect 26 0 32 1;
#X connect 26 0 33 1;
#X connect 27 0 28 0;
#X connect 27 1 33 1;
#X connect 31 0 24 0;
#X connect 32 0 22 0;
#X connect 33 0 27 0;
#X connect 36 0 34 0;
