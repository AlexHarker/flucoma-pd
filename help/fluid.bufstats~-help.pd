#N canvas 56 23 734 649 10;
#X obj 12 19 cnv 15 100 10 empty empty fluid.bufstats~ 20 12 0 36 -262144
-66577 0;
#X text 36 57 Computing Statistics on Buffers as Series., f 66;
#X text 37 116 Statistical analysis on buffer channels., f 62;
#N canvas 719 119 748 613 generators 0;
#X obj 57 174 until;
#X msg 125 195 -1;
#X msg 57 195 1;
#X obj 57 216 +;
#X obj 57 237 t f f f;
#X obj 58 571 tabwrite bufstats_source, f 108;
#X msg 89 121 \; bufstats_source const;
#X obj 39 101 t b b b b;
#X msg 57 155 101;
#X obj 265 36 inlet;
#X obj 265 54 t b b b;
#X msg 487 237 0;
#X msg 89 274 1;
#X obj 57 293 spigot;
#X obj 57 314 / 100;
#X obj 313 36 inlet;
#X obj 313 54 t b b b;
#X msg 137 301 1;
#X obj 105 320 spigot;
#X obj 361 36 inlet;
#X obj 361 54 t b b b;
#X msg 185 367 1;
#X obj 153 386 spigot;
#X obj 409 36 inlet;
#X obj 409 54 t b b b;
#X msg 233 435 1;
#X obj 201 454 spigot;
#X obj 457 36 inlet;
#X obj 457 54 t b b b;
#X msg 281 505 1;
#X obj 249 523 spigot;
#X obj 105 341 expr 1 - ($f1 / 100.);
#X obj 153 407 expr sin($f1 * 0.03141592653589793);
#X obj 201 473 expr max(0 \, sin($f1*0.03141592653589793*2.));
#X obj 39 122 outlet;
#X obj 249 544 expr random(0 \, 100001) * 1e-05;
#X connect 0 0 2 0;
#X connect 1 0 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 13 0;
#X connect 4 0 30 0;
#X connect 4 0 26 0;
#X connect 4 0 22 0;
#X connect 4 0 18 0;
#X connect 4 1 5 1;
#X connect 4 2 3 1;
#X connect 7 0 34 0;
#X connect 7 1 8 0;
#X connect 7 2 1 0;
#X connect 7 3 6 0;
#X connect 8 0 0 0;
#X connect 9 0 10 0;
#X connect 10 0 7 0;
#X connect 10 1 12 0;
#X connect 10 2 11 0;
#X connect 11 0 30 1;
#X connect 11 0 26 1;
#X connect 11 0 22 1;
#X connect 11 0 18 1;
#X connect 11 0 13 1;
#X connect 12 0 13 1;
#X connect 13 0 14 0;
#X connect 14 0 5 0;
#X connect 15 0 16 0;
#X connect 16 0 7 0;
#X connect 16 1 17 0;
#X connect 16 2 11 0;
#X connect 17 0 18 1;
#X connect 18 0 31 0;
#X connect 19 0 20 0;
#X connect 20 0 7 0;
#X connect 20 1 21 0;
#X connect 20 2 11 0;
#X connect 21 0 22 1;
#X connect 22 0 32 0;
#X connect 23 0 24 0;
#X connect 24 0 7 0;
#X connect 24 1 25 0;
#X connect 24 2 11 0;
#X connect 25 0 26 1;
#X connect 26 0 33 0;
#X connect 27 0 28 0;
#X connect 28 0 7 0;
#X connect 28 1 29 0;
#X connect 28 2 11 0;
#X connect 29 0 30 1;
#X connect 30 0 35 0;
#X connect 31 0 5 0;
#X connect 32 0 5 0;
#X connect 33 0 5 0;
#X connect 35 0 5 0;
#X restore 39 279 pd generators;
#N canvas 0 22 450 278 (subpatch) 0;
#X array bufstats_source 101 float 2;
#X coords 0 1 101 0 202 140 1 0 0;
#X restore 512 236 graph;
#X msg 57 200 ramp_down;
#X msg 39 181 ramp_up;
#X msg 76 219 half_sine;
#X msg 95 240 part_sine;
#X msg 114 260 random;
#X obj 512 385 array define bufstats_stats 7;
#X obj 39 318 array get bufstats_stats;
#X obj 39 339 unpack f f f f f f f f f f f f f f;
#X obj 39 300 fluid.bufstats~ -source bufstats_source -stats bufstats_stats
-numderivs 1, f 74;
#X text 350 365 mean;
#X text 349 382 stddev;
#X text 349 399 skewness;
#X text 349 416 kurtosis;
#X text 349 435 low;
#X text 350 451 mid;
#X text 349 467 high;
#X floatatom 287 365 10 0 0 0 - - -;
#X floatatom 287 382 10 0 0 0 - - -;
#X floatatom 287 399 10 0 0 0 - - -;
#X floatatom 287 416 10 0 0 0 - - -;
#X floatatom 287 433 10 0 0 0 - - -;
#X floatatom 287 450 10 0 0 0 - - -;
#X floatatom 287 467 10 0 0 0 - - -;
#X floatatom 287 517 10 0 0 0 - - -;
#X floatatom 287 534 10 0 0 0 - - -;
#X floatatom 287 551 10 0 0 0 - - -;
#X floatatom 287 568 10 0 0 0 - - -;
#X floatatom 287 585 10 0 0 0 - - -;
#X floatatom 287 602 10 0 0 0 - - -;
#X floatatom 287 619 10 0 0 0 - - -;
#X text 350 517 mean;
#X text 349 534 stddev;
#X text 349 551 skewness;
#X text 349 568 kurtosis;
#X text 349 587 low;
#X text 350 603 mid;
#X text 349 619 high;
#X text 284 347 stats on the data;
#X text 285 501 stats on the first derivative;
#X text 36 165 1) choose a source \, visualise it below \, and try
to imagine what would the values should be, f 91;
#N canvas 0 23 450 300 multichannel 0;
#X restore 611 505 pd multichannel;
#N canvas 791 26 757 646 musical_example 0;
#X obj 16 57 soundfiler;
#X obj 16 75 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 448 532 array define bufstats_synth;
#X obj 449 553 array define bufstats_synth_slices;
#X obj 449 572 clone multiarray 2 bufstats_synth_slices_pitches;
#X obj 18 110 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 18 128 fluid.bufonsetslice~ -minslicelength 10 -metric 9 -threshold
0.4 -filtersize 7 -source bufstats_synth -indices bufstats_synth_slices
, f 78;
#X obj 18 175 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 16 28 read -resize ../media/Tremblay-AaS-SynthTwoVoices-M.wav
bufstats_synth;
#X floatatom 20 231 5 0 1 0 - - -;
#X obj 20 266 fluid.bufcompose~ -source bufstats_synth_slices_pitches
-destination bufstats_synth_slices_selected -numchans 1;
#X msg 20 248 startchan \$1 \, bang;
#X obj 449 591 array define bufstats_synth_slices_selected;
#X obj 18 157 fluid.bufpitch~ -source bufstats_synth -features bufstats_synth_slices_pitches
, f 78;
#X obj 448 610 array define bufstats_synth_slices_stats;
#N canvas 692 137 563 541 iterate_and_rank_slices 0;
#X obj 24 28 inlet;
#X obj 24 49 t b f;
#X obj 24 70 array size bufstats_synth_slices;
#X obj 24 91 - 1;
#X obj 108 202 +, f 6;
#X obj 108 165 until;
#X msg 108 184 1;
#X obj 108 223 t b f f f;
#X msg 155 185 -1;
#X obj 142 255 expr int(bufstats_synth_slices[$f1] / 512);
#X obj 141 315 expr max(2 \, (int(bufstats_synth_slices[$f1 + 1] /
512)) - $f2), f 64;
#X msg 141 285 startframe \$1;
#X msg 141 336 numframes \$1;
#X obj 109 361 fluid.bufstats~ -source bufstats_synth_slices_selected
-stats bufstats_synth_slices_stats -numderivs 1;
#X obj 109 393 int;
#X obj 109 411 tabread bufstats_synth_slices_stats;
#N canvas 313 48 1061 835 sorting_indices_per_values 0;
#X obj 532 180 inlet;
#X obj 622 491 pointer;
#X msg 624 370 -1;
#X msg 559 389 1;
#X obj 559 410 +;
#X obj 558 431 t f f f;
#X obj 58 573 pointer;
#X msg 58 451 next;
#X obj 56 371 int;
#X obj 58 431 until;
#X obj 103 738 list store;
#X obj 255 711 t l l;
#X obj 255 690 list prepend;
#X obj 799 189 inlet;
#X obj 532 209 t f b;
#X obj 56 392 + 1;
#X obj 799 242 t b b b;
#X obj 192 181 inlet;
#X obj 195 204 t b b b b b;
#X obj 103 759 outlet;
#X obj 338 97 struct bufstatsitemstobesorted float x float index;
#N canvas 0 23 450 300 bufstatstobesorted 0;
#X restore 692 100 pd bufstatstobesorted;
#X msg 830 319 \; pd-bufstatstobesorted clear;
#X msg 622 469 traverse pd-bufstatstobesorted \, bang;
#X msg 104 490 traverse pd-bufstatstobesorted;
#X msg 359 348 \; pd-bufstatstobesorted sort;
#X obj 494 544 append bufstatsitemstobesorted x index;
#X obj 58 593 get bufstatsitemstobesorted index;
#X connect 0 0 14 0;
#X connect 1 0 26 2;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 8 1;
#X connect 5 1 26 1;
#X connect 5 2 4 1;
#X connect 6 0 27 0;
#X connect 7 0 6 0;
#X connect 8 0 15 0;
#X connect 9 0 7 0;
#X connect 10 0 19 0;
#X connect 11 0 10 1;
#X connect 11 1 12 1;
#X connect 12 0 11 0;
#X connect 13 0 16 0;
#X connect 14 0 26 0;
#X connect 14 1 3 0;
#X connect 15 0 9 0;
#X connect 16 0 2 0;
#X connect 16 1 23 0;
#X connect 16 2 22 0;
#X connect 17 0 18 0;
#X connect 18 0 10 0;
#X connect 18 1 8 0;
#X connect 18 2 12 1;
#X connect 18 3 24 0;
#X connect 18 4 25 0;
#X connect 23 0 1 0;
#X connect 24 0 6 0;
#X connect 27 0 12 0;
#X restore 23 469 pd sorting_indices_per_values;
#X obj 24 112 t b f b b, f 29;
#X obj 23 490 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 14 1;
#X connect 2 0 3 0;
#X connect 3 0 17 0;
#X connect 4 0 7 0;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 7 0 13 0;
#X connect 7 1 10 0;
#X connect 7 2 9 0;
#X connect 7 3 4 1;
#X connect 8 0 4 1;
#X connect 9 0 10 1;
#X connect 9 0 11 0;
#X connect 10 0 12 0;
#X connect 11 0 13 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 16 1;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 17 1 5 0;
#X connect 17 2 8 0;
#X connect 17 3 16 2;
#X restore 189 373 pd iterate_and_rank_slices;
#X obj 24 452 list store, f 28;
#X floatatom 24 417 5 0 0 0 - - -;
#X msg 24 434 get \$1 1;
#X obj 24 487 t f f;
#X obj 24 627 dac~;
#X obj 50 566 -;
#X obj 24 587 pack;
#X floatatom 24 470 5 0 0 0 - - -;
#X obj 24 564 f;
#X obj 24 543 t f f;
#X obj 24 506 + 1;
#X obj 24 524 tabread bufstats_synth_slices;
#X obj 207 524 tabread bufstats_synth_slices;
#X obj 24 606 tabplay~ bufstats_synth;
#X msg 434 332 0;
#X text 57 470 which slice is it;
#X text 58 415 5) query by rank;
#X msg 434 350 5;
#X text 432 314 4) select which stat to sort by;
#X text 457 332 -> mean of that descriptor;
#X text 458 349 -> median of that descriptor;
#X text 58 219 3) select which desricptor: it can be changed \, and
which one is used to sort too by changing which channel is selected.
Changing to channel 1 would sort by pitch confidence., f 100;
#X text 41 108 2) trigger the slicing;
#X text 15 10 1) load a soundfile;
#X connect 0 0 1 0;
#X connect 5 0 6 0;
#X connect 6 0 13 0;
#X connect 8 0 0 0;
#X connect 9 0 11 0;
#X connect 11 0 10 0;
#X connect 13 0 7 0;
#X connect 15 0 16 1;
#X connect 16 0 23 0;
#X connect 17 0 18 0;
#X connect 18 0 16 0;
#X connect 19 0 26 0;
#X connect 19 1 28 0;
#X connect 21 0 22 1;
#X connect 22 0 29 0;
#X connect 23 0 19 0;
#X connect 24 0 22 0;
#X connect 25 0 24 0;
#X connect 25 1 21 0;
#X connect 26 0 27 0;
#X connect 27 0 25 0;
#X connect 28 0 21 1;
#X connect 28 0 24 1;
#X connect 29 0 20 0;
#X connect 29 0 20 1;
#X connect 30 0 15 0;
#X connect 33 0 15 0;
#X restore 611 486 pd musical_example;
#X connect 3 0 13 0;
#X connect 5 0 3 1;
#X connect 6 0 3 0;
#X connect 7 0 3 2;
#X connect 8 0 3 3;
#X connect 9 0 3 4;
#X connect 11 0 12 0;
#X connect 12 0 21 0;
#X connect 12 1 22 0;
#X connect 12 2 23 0;
#X connect 12 3 24 0;
#X connect 12 4 25 0;
#X connect 12 5 26 0;
#X connect 12 6 27 0;
#X connect 12 7 28 0;
#X connect 12 8 29 0;
#X connect 12 9 30 0;
#X connect 12 10 31 0;
#X connect 12 11 32 0;
#X connect 12 12 33 0;
#X connect 12 13 34 0;
#X connect 13 0 11 0;
